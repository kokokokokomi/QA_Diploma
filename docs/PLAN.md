# План автоматизации тестирования сценария покупки тура через веб-сервис "Путешествие дня", взаимодействующий с СУБД и API Банка.

## 1. Перечень автоматизируемых сценариев
***ВАЖНО:** Перед началом работы необходимо запустить SUT. Инструкция приведена в файле [README.md](https://github.com/komisuomi/QA_Diploma/blob/master/README.md)*.

**Сценарий №1. Позитивный сценарий покупки тура по карте.**
1. Открыть веб-сервис ["Путешествие дня"](http://localhost:8080/).
2. Кликнуть по кнопке «Купить».
3. Заполнить поле «Номер карты» валидными данными.
4. Протестировать поле «Номер карты» по сценариям (см. сценарии для тестирования поля «Номер карты»).
5. Заполнить поле «Месяц» и поле «Год» валидными данными (валидной считается дата в диапазоне "текущая +5 лет).
6. Протестировать поле «Месяц» по сценариям (см. сценарии для тестирования поле «Месяц»).
7. Протестировать поле «Год» по сценариям (см. сценарии для тестирования поле «Год»).
8. Заполнить поле «Владелец» валидными данными.
9. Протестировать поле «Владелец» по сценариям (см. сценарии для тестирования поля «Владелец»).
10. Заполнить поле «CVC/CVV» валидными данными.
11. Протестировать поле «CVC/CVV» по сценариям (см. сценарии для тестирования поля «CVC/CVV»).
12. Нажать кнопку «Продолжить».
13. Отправить JSON запрос с данной картой и получить статус  транзакциии из ответа от симулятора.
14. Проверить создание записи в БД в таблицу "order_entity" и получить из нее код payment_id, выборка записи с самой поздней датой и времени создания.
15. Проверить создание записи в БД в таблицу "payment_entity". Выборка записи с самой поздней датой и времени создания. Проверка значений полей transaction_id = payment_id (из таблицы "order_entity"), status равен статусу транзакции из ответа от симулятора, amount равно сумме покупки тура в копейках (4 500 000), полученного со стартовой страницы сервиса.
16. Проверить вывод сообщения от сервиса пользователю об успешно выполненной операции (если статус транзакции APPROVED) или выводе сообщения об отказе в выполнении операции банком (если статус транзакции DECLINED).

**Сценарий №2. Позитивный сценарий покупки тура по карте в кредит.**
1. Открыть веб-сервис ["Путешествие дня"](http://localhost:8080/).
2. Кликнуть по кнопке «Купить в кредит».
3. Заполнить поле «Номер карты» валидными данными.
4. Протестировать поле «Номер карты» по сценариям (см. сценарии для тестирования поля «Номер карты»).
5. Заполнить поле «Месяц» и поле «Год» валидными данными (валидной считается дата в диапазоне "текущая +5 лет).
6. Протестировать поле «Месяц» по сценариям (см. сценарии для тестирования поле «Месяц»).
7. Протестировать поле «Год» по сценариям (см. Сценарии для тестирования поле «Год»).
8. Заполнить поле «Владелец» валидными данными.
9. Протестировать поле «Владелец» по сценариям (см. Сценарии для тестирования поля «Владелец»).
10. Заполнить поле «CVC/CVV» валидными данными.
11. Протестировать поле «CVC/CVV» по сценариям см. Сценарии для тестирования поля «CVC/CVV»).
12. Нажать кнопку «Продолжить».
13. Отправить JSON запрос с данной картой и получить статус транзакции из ответа от симулятора.
14. Проверить создание записи в БД в таблицу "order_entity" и получить из нее код credit_id, выборка записи с самой поздней датой и времени создания.
15. Проверить создание записи в БД в таблицу "credit_request_entity". Выборка записи с самой поздней датой и времени создания. Проверка значений полей bank_id = credit_id (из таблицы "order_entity"), status равен статусу транзакции из ответа от симулятора.
16. Проверить вывод сообщения от сервиса пользователю об успешно выполненной операции (если статус транзакции APPROVED) или выводе сообщения об отказе в выполнении операции банком (если статус транзакции DECLINED).
